<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>SexyFishHorses follower alert</title>
    <link rel="stylesheet" href="scripts/bower/font-awesome/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="scripts/bower/foundation/css/foundation.css"/>
    <link rel="stylesheet" href="styles/topbarOverride.css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
    <link rel="stylesheet" href="styles/followerAlert.css"/>
    <link rel="stylesheet" href="styles/style.css">
    <script src="scripts/bower/jquery/dist/jquery.min.js"></script>
    <script src="scripts/bower/foundation/js/vendor/modernizr.js"></script>
    <script src="scripts/bower/foundation/js/foundation.min.js"></script>
    <script src="scripts/bower/foundation/js/foundation/foundation.reveal.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="scripts/url-utils.js"></script>
    <script src="scripts/setup.js"></script>
</head>
<body>
<nav class="top-bar" data-topbar role="navigation">
    <ul class="title-area">
        <li class="name">
            <h1><a href="http://sexyfishhorse.com" target="_blank">SexyFishHorse.com</a></h1>
        </li>
    </ul>

    <section class="top-bar-section">
        <ul class="left">
            <li>
                <a href="#">Twitch+Hitbox follower alert</a>
            </li>
            <li class="divider"></li>
            <li>
                <a href="#" data-reveal-id="about-modal"><i class="fa fa-question-circle"></i> About</a>
            </li>
        </ul>
        <ul class="right">
            <li>
                <a href="https://github.com/asser-dk/twitchbox-follower-alert" target="_blank"><i
                        class="fa fa-github"></i> Source at GitHub</a>
            </li>
            <li class="divider"></li>
            <li><a href="#" data-reveal-id="obs-installation-modal"><i class="fa fa-cogs"></i> OBS installation</a></li>
            <li>
                <a href="#" data-reveal-id="custom-css-modal"><i class="fa fa-css3"></i> Custom CSS</a>
            </li>
            <li class="divider"></li>
            <li class="has-dropdown">
                <a href="#" class="launch-follower-notification"><i class="fa fa-rocket"></i> Launch</a>
                <ul class="dropdown">
                    <li><a href="#" data-reveal-id="quick-launch-modal"><i class="fa fa-cog"></i> Configure</a></li>
                    <li><a href="#" class="generate-link"><i class="fa fa-external-link"></i> Generate URL</a></li>
                </ul>
            </li>
        </ul>
    </section>
</nav>
<div class="follower-alert preview1">
    <div class="provider">Hitbox</div>
    <div class="name">SexyFishHorse</div>
</div>
<div class="follower-alert preview2">
    <div class="provider">Twitch</div>
    <div class="name">S3xyFishHorse</div>
</div>
<a href="#" class="launch-follower-notification button large large-launch-button"><i class="fa fa-rocket"></i>
    Launch</a>
<div id="about-modal" class="reveal-modal" data-reveal>
    <h2>About</h2>
    <p class="lead">A follower alert for both Twitch and Hitbox.</p>
    <p>I was looking around for a follower alert for my stream that listened to both Twitch and Hitbox but I couldn't find anything I thought was fairly easy to set up so I made my own. I have made this website available so you can use it too.</p>
    <p>The setup and configuration is similar/identical to other follower alerts, such as i.e. <a href="https://nightdev.com/followalert/" target="_blank">NightDevs follower alert</a>, so if you know how to set that up you know how to set this one up as well.</p>
    <p>Once you have entered your settings for the follower alert you can either launch the follower alert right away and use i.e. window capture and chromakey to add it to your stream, or you can get the link directly and use a plugin for your stream software that loads data from a website (i.e. <a href="https://obsproject.com/forum/resources/clr-browser-source-plugin.22/" target="_blank">CLR Browser for OBS</a>).</p>
    <p>The website will remember your settings for when you return so if you've set it up before you can simply click "<a href="#" class="launch-follower-notification"><i class="fa fa-rocket"></i> Launch"</a></p>
    <p>If you have any feedback/bug reports/feature requests then go to <a href="https://github.com/asser-dk/twitchbox-follower-alert/issues" target="_blank"><i class="fa fa-github"></i> GitHub</a> and create an issue and I will have a look.</p>
    <i class="close-reveal-modal fa fa-close"></i>
</div>
<div id="obs-installation-modal" class="reveal-modal" data-reveal>
    <h2>OBS Installation</h2>

    <p class="lead">Integrate the follower alert with OBS</p>

    <p>This guide assumes you already have <a href="http://obsproject.com" target="_blank">OBS</a> installed and you
        have a basic understanding on how to use the application.</p>

    <p>
        <strong>Prerequisite:</strong>
        Download and install the <a href="https://obsproject.com/forum/resources/clr-browser-source-plugin.22/"
                                    target="_blank">CLR Browser Source Plugin for OBS</a>.
    </p>

    <p>
        <strong>Step 1:</strong>
        Add a new "CLR Browser" source to a scene.
        <br/>
        <img src="images/help/obs/Step1.png" alt="Step 1" />
    </p>
    <p>
        <strong>Step 2:</strong>
        Paste in your generated follower alert url in the text box. Set the height to 120 and the width to 510.
        <br/>
        <img src="images/help/obs/Step2.png" alt="Step 2" />
    </p>
    <p>
        <strong>Step 3 (optional):</strong>
        If you want to customize your follower alert further, paste in your custom CSS here.
        <br/>
        <img src="images/help/obs/Step3.png" alt="Step 3" />
    </p>
    <i class="close-reveal-modal fa fa-close"></i>
</div>
<div id="follower-alert-url-modal" class="reveal-modal" data-reveal>
    <h2>Follower alert URL</h2>

    <p class="lead">Here is your follower alert URL.</p>

    <div class="row">
        <label>
            <input type="text" id="follower-alert-url" readonly/>
            Click the link and press Ctrl/Cmd + C to copy the link.
        </label>
    </div>
    <i class="close-reveal-modal fa fa-close"></i>
</div>
<div id="custom-css-modal" class="reveal-modal" data-reveal>
    <h2>Custom CSS</h2>

    <p class="lead">Further customize your follower alert.</p>

    <p>This is the CSS the follower alert is using as default. You can copy and modify this for use with your favourite
        streaming software.</p>
    <pre><code class="css">.follower-alert {
    position: relative;
    width: 500px;
    height: 100px;
    color: white;
    font-family: "Lucida Grande", "Trebuchet MS", sans-serif;
    text-align: center;
}

.follower-alert .name {
    position: absolute;
    width: 420px;
    top: 37px;
    left: 40px;
    font-size: 40px;
    line-height: 50px;
    font-weight: bold;
    text-shadow: 2px 2px #666666;
}

.follower-alert .provider {
    position: absolute;
    width: 420px;
    left: 40px;
    top: 12px;
    font-size: 20px;
    line-height: 20px;
    text-shadow: 1px 1px #666666;
}</code></pre>
    <i class="close-reveal-modal fa fa-close"></i>
</div>
<div id="quick-launch-modal" class="quick-launch reveal-modal" data-reveal>
    <h2>Quick launch</h2>

    <p>The settings you enter here will be stored on your pc so you can start the follower alert instantly the next time
        you visit this site.</p>

    <div class="row">
        <label>Twitch channel name: <input type="text" id="twitchChannelName" class="stored"
                                           name="twitchChannelName"/></label>
    </div>
    <div class="row">
        <label>Hitbox channel name: <input type="text" id="hitboxChannelName" class="stored"
                                           name="hitboxChannelName"/></label>
    </div>
    <div class="row">
        <label>Image link: <a href="#" data-reveal-id="image-help-modal"><i class="fa fa-question-circle"></i></a>
            <input type="text" id="imageSource" class="stored" name="imageSource"/></label>
    </div>
    <div class="row">
        <label>Sound link: <a href="#" data-reveal-id="sound-help-modal"><i class="fa fa-question-circle"></i></a>
            <input type="text" id="soundSource" class="stored" name="soundSource"/></label>
    </div>
    <div class="row">
        <label>Preview notification on launch: <input type="checkbox" class="stored" id="previewNotification"
                                                      name="previewNotification"/></label>
    </div>
    <div class="row">
        <a href="#" class="launch-follower-notification button">Launch</a>
        <a href="#" class="generate-follower-notification-url button secondary"
           data-reveal-id="follower-alert-url-modal">Generate URL</a>
    </div>
    <i class="close-reveal-modal fa fa-close"></i>
</div>
<div id="image-help-modal" class="reveal-modal" data-reveal>
    <h2>Background image</h2>

    <p class="lead">Add a custom background image to your follower alert.</p>

    <p>Upload your image to an image hosting site that allows direct linking to images (i.e. <a
            href="http://imgur.com" target="_blank">imgur.com</a> and copy the direct image link into the text box
        (i.e. <a href="#">http://i.imgur.com/Zb1XCVO.png</a>).</p>

    <h3>Template</h3>

    <p>The alert is built around my personal notification but you can customize it to your liking. This template is
        provided for your convenience so you can make your very own follower alert.</p>
    <img src="images/help/Template.png" alt="Template"/>

    <h3>How to imgur</h3>

    <p>
        <strong>Step 1:</strong>
        Go to <a href="http://imgur.com" target="_blank">imgur.com</a> and click the "Upload images" button.
        <br/>
        <img src="images/help/imgur/UploadStep1.png" alt="Step 1"/>
    </p>

    <p>
        <strong>Step 2:</strong>
        Upload the image using one of the options provided. Notice how your image is added to the list in the
        bottom. Click "Start upload" when you're ready.
        <br/>
        <img src="images/help/imgur/UploadStep2.png" alt="Step 2"/>
    </p>

    <p>
        <strong>Step 3:</strong>
        Copy the value in the "Direct Link" text field and paste it into the "Image link" text box on this website.
        <br/>
        <img src="images/help/imgur/UploadStep3.png" alt="Step 3"/>
    </p>
    <a href="#" class="button secondary" data-reveal-id="quick-launch-modal"><i class="fa fa-arrow-left"></i> Back</a>
    <i class="close-reveal-modal fa fa-arrow-left" data-reveal-id="quick-launch-modal"></i>
</div>
<div id="sound-help-modal" class="reveal-modal" data-reveal>
    <h2>Follower sound notification</h2>

    <p class="lead">Add a custom sound to your follower alert</p>

    <p>Upload your custom sound to a sound hosting service that allows for direct linking to the sound (i.e. as <a
            href="http://clyp.it" target="_blank">clyp.it</a>) and copy the direct sound link into the text box (i.e. <a
            href="#">https://clyp.it/zunx1trj.ogg</a>)</p>

    <h3>How to clyp.it</h3>
    <p>
        <strong>Step 1:</strong>
        Go to <a href="http://clyp.it" target="_blank">clyp.it</a> and upload your sound from the front page
        <br/>
        <img src="images/help/clyp/UploadStep1.png" alt="Step 1"/>
    </p>

    <p>
        <strong>Step 1:</strong>
        Click "Advanced" and copy the value of the "Direct OGG Link" text field and paste it into the "Sound link" text
        box on this site.
        <br/>
        <img src="images/help/clyp/UploadStep2.png" alt="Step 2"/>
    </p>
    <a href="#" class="button secondary" data-reveal-id="quick-launch-modal"><i class="fa fa-arrow-left"></i> Back</a>
    <i class="close-reveal-modal fa fa-arrow-left" data-reveal-id="quick-launch-modal"></i>
</div>
<script>
    $(function ()
    {
        $(document).foundation();

        $('.reveal-modal').css('max-height', $('html').height() - 110 + 'px'); // 100 +10px to keep modal effect visible
        $(window).resize(function ()
        {
            $('.reveal-modal').css('max-height', $('html').height() - 110 + 'px');
        });

        hljs.initHighlightingOnLoad();

        $('.follower-alert').hide();
        $('.large-launch-button').hide();
        $('.preview1').fadeIn(1000).delay(2000).fadeOut(1000)
                .next().delay(4000).fadeIn(1000).delay(2000).fadeOut(1000)
                .next().delay(8000).fadeIn(2000);

        var twitchChannelName = localStorage.twitchChannelName;
        var hitboxChannelName = localStorage.hitboxChannelName;
        var imageSource = localStorage.imageSource;
        var soundSource = localStorage.soundSource;
        var previewNotification = localStorage.previewNotification;

        $('#twitchChannelName').val(twitchChannelName);
        $('#hitboxChannelName').val(hitboxChannelName);
        $('#imageSource').val(imageSource);
        $('#soundSource').val(soundSource);
        $('#previewNotification').prop('checked', previewNotification);

        $('.stored').change(function (args)
        {
            localStorage[args.currentTarget.name] = args.currentTarget.value;
        });

        $('#follower-alert-url').click(function(){
            $(this).select();
        });

        $('.launch-follower-notification').click(function ()
        {
            updateVariablesFromLocalStorage();
            if (!twitchChannelName && !hitboxChannelName)
            {
                console.warn('No channel names set. Opening configuration modal.');
                $('#quick-launch-modal').foundation('reveal', 'open');
            }
            else
            {
                launchFollowerAlert(twitchChannelName, hitboxChannelName, imageSource, soundSource, previewNotification);
            }
        });

        $('.generate-follower-notification-url').click(function ()
        {
            updateVariablesFromLocalStorage();
            $('#follower-alert-url').val(generateFollowerAlertUrl(twitchChannelName, hitboxChannelName, imageSource, soundSource, previewNotification));
        });

        $('.generate-link').click(function(){
            updateVariablesFromLocalStorage();
            if (!twitchChannelName && !hitboxChannelName)
            {
                console.warn('No channel names set. Opening configuration modal.');
                $('#quick-launch-modal').foundation('reveal', 'open');
            }
            else
            {
                $('#follower-alert-url').val(generateFollowerAlertUrl(twitchChannelName, hitboxChannelName, imageSource, soundSource, previewNotification));
                $('#follower-alert-url-modal').foundation('reveal', 'open');
            }
        });

        function updateVariablesFromLocalStorage()
        {
            twitchChannelName = localStorage.twitchChannelName;
            hitboxChannelName = localStorage.hitboxChannelName;
            imageSource = localStorage.imageSource;
            soundSource = localStorage.soundSource;
            previewNotification = localStorage.previewNotification;
        }
    });
</script>
</body>
</html>
